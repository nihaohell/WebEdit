/*
 Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
*/
(function(){function m(a,c){c=void 0===c||c;var b;if(c)b=a.getComputedStyle("text-align");else{for(;!a.hasAttribute||!a.hasAttribute("align")&&!a.getStyle("text-align");){b=a.getParent();if(!b)break;a=b}b=a.getStyle("text-align")||a.getAttribute("align")||""}b&&(b=b.replace(/(?:-(?:moz|webkit)-)?(?:start|auto)/i,""));!b&&c&&(b="rtl"==a.getComputedStyle("direction")?"right":"left");return b}function h(a,c,b){this.editor=a;this.name=c;this.value=b;this.context="p";c=a.config.justifyClasses;var f=a.config.enterMode==
CKEDITOR.ENTER_P?"p":"div";if(c){switch(b){case "left":this.cssClassName=c[0];break;case "center":this.cssClassName=c[1];break;case "right":this.cssClassName=c[2];break;case "justify":this.cssClassName=c[3]}this.cssClassRegex=new RegExp("(?:^|\\s+)(?:"+c.join("|")+")(?\x3d$|\\s)");this.requiredContent=f+"("+this.cssClassName+")"}else this.requiredContent=f+"{text-align}";this.allowedContent={"caption div h1 h2 h3 h4 h5 h6 p pre td th li":{propertiesOnly:!0,styles:this.cssClassName?null:"text-align",
classes:this.cssClassName||null}};a.config.enterMode==CKEDITOR.ENTER_BR&&(this.allowedContent.div=!0)}function n(a){var c=a.editor,b=c.createRange();b.setStartBefore(a.data.node);b.setEndAfter(a.data.node);for(var f=new CKEDITOR.dom.walker(b),d;d=f.next();)if(d.type==CKEDITOR.NODE_ELEMENT)if(!d.equals(a.data.node)&&d.getDirection())b.setStartAfter(d),f=new CKEDITOR.dom.walker(b);else{var e=c.config.justifyClasses;e&&(d.hasClass(e[0])?(d.removeClass(e[0]),d.addClass(e[2])):d.hasClass(e[2])&&(d.removeClass(e[2]),
d.addClass(e[0])));e=d.getStyle("text-align");"left"==e?d.setStyle("text-align","right"):"right"==e&&d.setStyle("text-align","left")}}h.prototype={exec:function(a){var c=a.getSelection(),b=a.config.enterMode;if(c){for(var f=c.createBookmarks(),d=c.getRanges(),e=this.cssClassName,p,g,k=a.config.useComputedState,k=void 0===k||k,q=d.length-1;0<=q;q--)for(p=d[q].createIterator(),p.enlargeBr=b!=CKEDITOR.ENTER_BR;g=p.getNextParagraph(b==CKEDITOR.ENTER_P?"p":"div");)if(!g.isReadOnly()){var l=g.getName(),
h;h=a.activeFilter.check(l+"{text-align}");if((l=a.activeFilter.check(l+"("+e+")"))||h){g.removeAttribute("align");g.removeStyle("text-align");var n=e&&(g.$.className=CKEDITOR.tools.ltrim(g.$.className.replace(this.cssClassRegex,""))),r=this.state==CKEDITOR.TRISTATE_OFF&&(!k||m(g,!0)!=this.value);e&&l?r?g.addClass(e):n||g.removeAttribute("class"):r&&h&&g.setStyle("text-align",this.value)}}a.focus();a.forceNextSelectionCheck();c.selectBookmarks(f)}},refresh:function(a,c){var b=c.block||c.blockLimit,
f=b.getName(),d=b.equals(a.editable()),f=this.cssClassName?a.activeFilter.check(f+"("+this.cssClassName+")"):a.activeFilter.check(f+"{text-align}");d&&!CKEDITOR.dtd.$list[c.lastElement.getName()]?this.setState(CKEDITOR.TRISTATE_OFF):!d&&f?this.setState(m(b,this.editor.config.useComputedState)==this.value?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)}};CKEDITOR.plugins.add("justify",{icons:"justifyblock,justifycenter,justifyleft,justifyright",icontype:".svg",
iconoffset:"center",iconbgsize:"16px",hidpi:!1,requires:"richcombo",init:function(a){if(!a.blockless){var c=new h(a,"justifyleft","left"),b=new h(a,"justifycenter","center"),f=new h(a,"justifyright","right"),d=new h(a,"justifyblock","justify");a.addCommand("justifyleft",c);a.addCommand("justifycenter",b);a.addCommand("justifyright",f);a.addCommand("justifyblock",d);a.ui.addButton&&(a.ui.addButton("JustifyLeft",{label:a.lang.common.alignLeft,command:"justifyleft",toolbar:"align,10"}),a.ui.addButton("JustifyCenter",
{label:a.lang.common.center,command:"justifycenter",toolbar:"align,20"}),a.ui.addButton("JustifyRight",{label:a.lang.common.alignRight,command:"justifyright",toolbar:"align,30"}),a.ui.addButton("JustifyBlock",{label:a.lang.common.justify,command:"justifyblock",toolbar:"align,40"}));if(a.ui.addRichCombo){var e={justifyleft:"左对齐",justifycenter:"居中对齐",justifyright:"右对齐",justifyblock:"两端对齐"};a.ui.addRichCombo("PanelJustify",{icon:"justifyblock",label:"对齐",title:"对齐方式",panel:{css:[CKEDITOR.skin.getPath("editor")].concat(a.config.contentsCss),
multiSelect:!1,attributes:{"aria-label":"对齐"}},init:function(){this.startGroup("对齐");var b=["justifyleft","justifycenter","justifyright","justifyblock"],c;for(c in b){var d=b[c],f=CKEDITOR.skin.getIconStyle(d,"rtl"==a.lang.dir,void 0,void 0);this.add(d,'\x3cspan class\x3d"cke_combo_icon cke_combo_icon__paneljustify cke_button_icon" style\x3d"'+f+'"\x3e'+e[d]+"\x3c/span\x3e",e[d])}},onClick:function(b){a.focus();a.fire("saveSnapshot");a.execCommand(b);setTimeout(function(){a.fire("saveSnapshot")},
0)},onRender:function(){a.on("selectionChange",function(a){this.getValue();a=a.data.path;firstBlock=a.block||a.blockLimit;a=firstBlock.getStyle("text-align");this.setValue(a?"justify"+a:"justifyleft")},this)},refresh:function(){if(this.editor){var b=a.elementPath();if(b){var c=b.block||b.blockLimit,d=c.getName(),e=c.equals(a.editable()),f=this.cssClassName?a.activeFilter.check(d+"("+this.cssClassName+")"):a.activeFilter.check(d+"{text-align}");console.log("this.namename",d,c.getStyle("text-align"));
e&&!CKEDITOR.dtd.$list[b.lastElement.getName()]?this.setState(CKEDITOR.TRISTATE_OFF):!e&&f?this.setState(m(c,this.editor.config.useComputedState)==this.value?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)}}}})}a.on("dirChanged",n)}}})})();