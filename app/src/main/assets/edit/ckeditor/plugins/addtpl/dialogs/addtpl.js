CKEDITOR.dialog.add("addtplDialog",function(D){function E(d,a,g){d=""===d?"":g[d].modelId;g=[];var f="";try{var c=CKEDITOR.ajax.load((window.tplUrl?window.tplUrl:"http://test-blog-console.csdn.net/")+"phoenix/console/v1/editModelRelation/findUserInfoByModelId?modelId\x3d"+d),c=JSON.parse(c);200===c.code?(g=200===c.code&&c.data?c.data.list:[],g.length?g.forEach(function(a){f+='\x3cdiv class\x3d"img_outer flex flex--column flex--align-center"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3ca style\x3d"width:103px;height:103px;cursor:pointer;" href\x3d"'+
a.blogUrl+'"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3cimg class\x3d"img_item" src\x3d"'+a.avatarUrl+'" /\x3e\r\n\t\t\t\t\t\t\t\t\t\x3c/a\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cp class\x3d"contributer_name"\x3e'+a.nickname+"\x3c/p\x3e\r\n\t\t\t\t\t\t\t\t\x3c/div\x3e"}):f='\x3cp style\x3d"text-align:center;width:100%;margin:1rem;font-size:16px;"\x3e暂无相关贡献者\x3c/p\x3e',a.innerHTML=f):alert(c.message)}catch(h){alert("接口异常")}}var k="",l="",p="",q=[];try{var h=CKEDITOR.ajax.load((window.tplUrl?window.tplUrl:"http://test-blog-console.csdn.net/")+
"phoenix/console/v1/editModel/findPublicShowEditModels?page\x3d1\x26size\x3d100"),h=JSON.parse(h);200===h.code?q=200===h.code&&h.data?h.data.list:[]:alert(h.message)}catch(F){console.log(F),alert("接口异常")}l='\x3ca style\x3d"position:absolute;top:24px;right:24px;" class\x3d"unqie__close cke_dialog_close_button" href\x3d"javascript:void(0)" role\x3d"button"\x3e\x3cspan class\x3d"cke_label"\x3e\x3csvg class\x3d"icon" aria-hidden\x3d"true"\x3e\x3cuse xlink:href\x3d"#csdnc-times"\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/span\x3e\x3c/a\x3e\r\n\t\t\t\t\t\x3cdiv  style\x3d"cursor:pointer; position: absolute;width:18px;height:18px;postion:absolute; top:26px; left: 24px;" class\x3d"flex flex--align-center go__back"\x3e\r\n\t\t\t\t\t\t\x3csvg style\x3d"cursor:pointer;" t\x3d"1551855786171" class\x3d"icon" viewBox\x3d"0 0 1024 1024" version\x3d"1.1" xmlns\x3d"http://www.w3.org/2000/svg" p-id\x3d"15996" xmlns:xlink\x3d"http://www.w3.org/1999/xlink" width\x3d"200" height\x3d"200"\x3e\r\n\t\t\t\t\t\t\t\x3cpath d\x3d"M399.936 511.786667L736.213333 846.912c20.885333 20.842667 20.970667 54.656 0.192 75.584l-0.192 0.213333a53.909333 53.909333 0 0 1-75.989333 0L287.786667 551.552a53.418667 53.418667 0 0 1-15.701334-39.765333 53.418667 53.418667 0 0 1 15.701334-39.765334L660.224 100.885333a53.866667 53.866667 0 0 1 75.989333 0c20.885333 20.821333 20.970667 54.656 0.192 75.562667l-0.192 0.192-336.277333 335.146667z" fill\x3d"" p-id\x3d"15997"\x3e\x3c/path\x3e\r\n\t\t\t\t\t\t\x3c/svg\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"unqie__hide img_content flex"\x3e';
p='\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"tpl_content flex"\x3e';q.forEach(function(d){var a;a=(a=d.updateTime)?(10>(new Date(a)).getMonth()+1?"0"+((new Date(a)).getMonth()+1):(new Date(a)).getMonth()+1)+"月"+(10>(new Date(a)).getDate()?"0"+(new Date(a)).getDate():(new Date(a)).getDate())+"日":"";d.updateTime=a;k+='\x3cdiv class\x3d"tpl_item flex flex--column"\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"unqie__hide tpl_bg flex flex--center flex--align-center"\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"tpl__bg"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3cp class\x3d"tpl_name"\x3e'+
d.modelName+'\x3c/p\x3e\r\n\t\t\t\t\t\x3cimg class\x3d"tpl_image" src\x3d"'+d.synopsisUrl+'" /\x3e\r\n\t\t\t\t\x3c/div\x3e'});str=l+p+k+'\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv style\x3d"margin-top:4px;" class\x3d"unqie__footer modal__button-bar  flex--center  flex--align-center  flex flex--space-between"\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"show_contribution flex flex--center flex--align-center "\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"hour__image"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cp class\x3d"show_name"\x3e所有模版贡献者\x3c/p\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv\x3e\r\n\t\t\t\t\t\t\t\x3cbutton class\x3d"el-button el-button--default unqie__cancer"\x3e取消\x3c/button\x3e\r\n\t\t\t\t\t\t\t\x3cbutton class\x3d"el-button is-disabled el-button--danger unqie__confirm"\x3e添加到正文\x3c/button\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e';
return{title:"插入模版",minWidth:730,minHeight:540,resizable:CKEDITOR.DIALOG_RESIZE_NONE,contents:[{id:"addtpl",label:"addtpl",elements:[{type:"html",html:str}]}],onShow:function(d){function a(){A.innerHTML="插入模版";c(v,"unqie__hide");f(B,"unqie__hide");f(w,"unqie__hide");f(x,"unqie__hide");c(m,"unqie__hide");c(r,"unqie__hide");t.innerHTML="所有模版贡献者";c(u,"is-disabled");l();n="";m.addEventListener("click",function(){})}function g(b,e){return!!b.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function f(b,
e){g(b,e)&&(b.className=b.className.replace(new RegExp("(\\s|^)"+e+"(\\s|$)")," "))}function c(b,e){g(b,e)||(b.className+=" "+e)}function h(){E(n,v,q);A.innerHTML='\x3cspan style\x3d"margin-left: 23px;"\x3e\x3c/span\x3e贡献者';f(v,"unqie__hide");c(B,"unqie__hide");c(w,"unqie__hide");f(m,"unqie__hide");f(r,"unqie__hide");x.className+=" unqie__hide"}function k(){if(!g(this,"is-disabled")){var b=q[n].modelId;try{var e=CKEDITOR.ajax.load((window.tplUrl?window.tplUrl:"http://test-blog-console.csdn.net/")+
"phoenix/console/v1/editModel/findContentByModelId?modelId\x3d"+b+"\x26isMarkDown\x3dfalse"),e=JSON.parse(e);200===e.code?(window.csdn&&window.csdn.report&&window.csdn.report.reportClick({mod:"1597133602_002",extend1:b}),D.insertHtml(e.data.modelRichtextInfo),C.hide()):alert(e.message)}catch(a){alert("接口异常")}}}function y(b,a){return b.className?/tpl_item/.test(b.className)?b:y(b.parentNode,"tpl_item"):null}function l(){for(var b=document.querySelectorAll(".tpl_bg"),a=0;a<b.length;a++){var c=b[a];
g(c,"unqie__hide")||(c.className+=" unqie__hide")}}var z=document.querySelector(".cke_dialog_ui_vbox_child"),p=z.innerHTML;z.innerHTML="";z.innerHTML=p;window.csdn&&window.csdn.report&&window.csdn.report.reportClick({mod:"1597130368_005"});var n="",C=this,A=document.querySelector(".cke_dialog_title"),v=document.querySelector(".img_content"),B=document.querySelector(".unqie__footer"),w=document.querySelector(".tpl_content"),u=document.querySelector(".unqie__confirm"),x=document.querySelector(".cke_dialog_close_button"),
m=document.querySelector(".unqie__close"),r=document.querySelector(".go__back"),t=document.querySelector(".show_name");d.sender.parts.footer&&d.sender.parts.footer.$&&(d.sender.parts.footer.$.style="display: none");a();t.removeEventListener("click",h);t.addEventListener("click",h);document.querySelector(".unqie__cancer").addEventListener("click",function(){C.hide()});u.removeEventListener("click",k);u.addEventListener("click",k);m.removeEventListener("click",a);r.removeEventListener("click",a);m.addEventListener("click",
a);r.addEventListener("click",a);w.addEventListener("click",function(b){var a=b||a;if(b=y(a.target,"tpl_item")){l();if(b=b.children[0])g(b,"unqie__hide")?(b.className=b.className.replace(/unqie__hide/g,"").trim(),t.innerHTML="该模版贡献者"):b.className=(b.className+" unqie__hide").trim();n=Array.prototype.indexOf.call(document.querySelectorAll(".tpl_content .tpl_item"),y(a.target,"tpl_item"));""!==n&&f(u,"is-disabled")}})},onload:function(){}}});