/*
 Copyright (c) 2003-2018, CKSource - Frederico Knabben. All rights reserved.
 For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
*/
(function(){function m(a){CKEDITOR.tools.extend(this,a);this.queue=[];this.init?this.init(CKEDITOR.tools.bind(function(){for(var a;a=this.queue.pop();)a.call(this);this.ready=!0},this)):this.ready=!0}function p(a){var c=a.config.codeSnippet_codeClass,f=/\r?\n/g,k=new CKEDITOR.dom.element("textarea");a.widgets.add("codeSnippet",{allowedContent:"pre; code(language-*)",requiredContent:"pre",styleableElements:"pre",template:'\x3cpre\x3e\x3ccode class\x3d"'+c+' hljs"\x3e\x3c/code\x3e\x3c/pre\x3e',dialog:"codeSnippet",
pathName:a.lang.codesnippet.pathName,mask:!1,parts:{pre:"pre",code:"code"},highlight:function(){var b=this,d=this.data,e=function(a){b.parts.code.setHtml(n?a:a.replace(f,"\x3cbr\x3e"))};e(CKEDITOR.tools.htmlEncode(d.code));a._.codesnippet.highlighter.highlight(d.code,d.lang,function(b){a.fire("lockSnapshot");e(b);a.fire("unlockSnapshot")})},data:function(){var a=this.data,d=this.oldData;a.code&&this.parts.code.setHtml(CKEDITOR.tools.htmlEncode(a.code));d&&a.lang!=d.lang&&this.parts.code.removeClass("language-"+
d.lang);a.lang&&(this.parts.code.addClass("language-"+a.lang),this.highlight());this.oldData=CKEDITOR.tools.copy(a)},upcast:function(b,d){if("pre"==b.name){for(var e=!1,h=0;h<b.children.length&&(e="code"==b.children[h].name?!1:!0,e);h++);if(void 0!=b.attributes["class"]&&-1===b.attributes["class"].indexOf("has")&&e&&b.classes){var g=new CKEDITOR.htmlParser.element("code"),e=new CKEDITOR.htmlParser.text(b.getHtml());g.addClass("language-"+b.classes[0]);g.children[0]=e;b.children[0]=g;b.attributes["class"]=
"has"}for(var e=[],h=b.children,l,f=h.length-1;0<=f;f--)l=h[f],l.type==CKEDITOR.NODE_TEXT&&l.value.match(q)||e.push(l);if(1==e.length&&"code"==(g=e[0]).name&&1==g.children.length&&g.children[0].type==CKEDITOR.NODE_TEXT){if(e=a._.codesnippet.langsRegex.exec(g.attributes["class"]))d.lang=e[1];k.setHtml(g.getHtml());d.code=k.getValue();g.addClass(c);return b}}},downcast:function(a){var d=a.getFirst("code");d.children.length=0;d.removeClass(c);d.add(new CKEDITOR.htmlParser.text(CKEDITOR.tools.htmlEncode(this.data.code)));
return a}});var q=/^[\s\n\r]*$/}var n=!CKEDITOR.env.ie||8<CKEDITOR.env.version;CKEDITOR.plugins.add("codesnippet",{requires:"widget,dialog",lang:"ar,az,bg,ca,cs,da,de,de-ch,el,en,en-au,en-gb,eo,es,es-mx,et,eu,fa,fi,fr,fr-ca,gl,he,hr,hu,id,it,ja,km,ko,ku,lt,lv,nb,nl,no,oc,pl,pt,pt-br,ro,ru,sk,sl,sq,sv,th,tr,tt,ug,uk,vi,zh,zh-cn",icons:"codesnippet",icontype:".svg",iconoffset:"center",iconbgsize:"16px",hidpi:!1,beforeInit:function(a){a._.codesnippet={};this.setHighlighter=function(c){a._.codesnippet.highlighter=
c;c=a._.codesnippet.langs=a.config.codeSnippet_languages||c.languages;a._.codesnippet.langsRegex=new RegExp("(?:^|\\s)language-("+CKEDITOR.tools.objectKeys(c).join("|")+")(?:\\s|$)")}},onLoad:function(){CKEDITOR.dialog.add("codeSnippet",this.path+"dialogs/codesnippet.js")},init:function(a){a.ui.addButton&&a.ui.addButton("CodeSnippet",{label:a.lang.codesnippet.button,command:"codeSnippet",toolbar:"insert,14"})},afterInit:function(a){var c=this.path;p(a);if(!a._.codesnippet.highlighter){var f=new CKEDITOR.plugins.codesnippet.highlighter({languages:{bash:"Bash",
cpp:"C++",cs:"C#",css:"CSS",Delphi:"Delphi",diff:"diff",vbnet:"VB.NET",Go:"Go",html:"HTML",java:"Java",javascript:"JavaScript",Kotlin:"Kotlin",objectivec:"Objective-C",perl:"Perl",php:"PHP",python:"Python",ruby:"Ruby",sql:"SQL",vbscript:"VBScript",Swift:"Swift",Erlang:"Erlang",Scala:"Scala",Clojure:"Clojure",Cobol:"Cobol",CoffeeScript:"CoffeeScript",CommonLisp:"CommonLisp",Crystal:"Crystal",R:"R",rust:"Rust",Haskell:"Haskell",Lua:"Lua",Groovy:"Groovy",Puppet:"Puppet",TypeScript:"TypeScript",XML:"XML"},
init:function(k){var f=this;n&&CKEDITOR.scriptLoader.load(c+"lib/highlight/highlight.pack.js",function(){f.hljs=window.hljs;k();CKEDITOR.scriptLoader.load(c+"lib/highlight/highlightjs-line-numbers.min.js",function(){hljs.initLineNumbersOnLoad()})});a.addContentsCss&&a.addContentsCss(c+"lib/highlight/styles/"+a.config.codeSnippet_theme+".css")},highlighter:function(a,c,b){(a=this.hljs.highlightAuto(a,this.hljs.getLanguage(c)?[c]:void 0))&&b(a.value)}});this.setHighlighter(f)}}});CKEDITOR.plugins.codesnippet=
{highlighter:m};m.prototype.highlight=function(){var a=arguments;this.ready?this.highlighter.apply(this,a):this.queue.push(function(){this.highlighter.apply(this,a)})}})();CKEDITOR.config.codeSnippet_codeClass="hljs";CKEDITOR.config.codeSnippet_theme="default";